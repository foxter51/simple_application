<h1>
  <%= @post.title %>
  |
  <%= link_to "#{@post.user.name} #{@post.user.lastname}", @post.user %>
</h1>

Likes count: <%= @post.likes_count %>
<% if user_signed_in? %>
  <% like = current_user.likes.find_by(likeable_id: @post.id, likeable_type: @post.class.to_s) %>
  <% if like.nil? %>
    <%= button_to 'Like',  post_likes_path(post_id: @post.id),
                  params: {
                    like: {
                      likeable_id: @post.id,
                      likeable_type: @post.class.to_s
                    }
                  }, method: :post %>
  <% else %>
    <%= button_to 'Unlike',  post_like_path(post_id: @post.id, id: like), method: :delete %>
  <% end %>
<% end %>

<p class="notice"><%= flash[:warning] %></p>

<hr>

<div>
  <%= @post.body %>

  <% if @post.pic.attached? %>
    <image style="width: 100px; height: 100px;" src = "<%= (url_for(@post.pic)) %>"></image>
  <% end %>

  <hr>

  <nav style="display: flex; justify-content: space-between; width: 300px">
    <div><%= link_to 'Back', :back %></div>
    <div><%= link_to 'Edit', edit_post_path %></div>
    <div><%= button_to 'Delete', @post, method: :delete %></div>
    <%= link_to "Add comment", new_post_comment_path(@post) %>
  </nav>

  <% unless @post.comments.empty? %>
    <hr><h2>Comments</h2>
  <% end %>

  <div>
    <p class="notice"><%= notice %></p>
    <%= render @post.comments.order(created_at: :desc), cached: true %>
  </div>
</div>
